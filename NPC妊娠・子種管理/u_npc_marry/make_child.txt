// pid1とpid2が子作りする



// オルド性格ごとに成功判定
chk_sts,pid1,オルド性格,0
chk_sts_then
    goto,*kimagure
chk_sts_else
chk_sts,pid1,オルド性格,1
chk_sts_then
    goto,*chuseido
chk_sts_else
chk_sts,pid1,オルド性格,2
chk_sts_then
    goto,*keiken
chk_sts_else
chk_sts,pid1,オルド性格,3
chk_sts_then
    goto,*sasenai
chk_sts_else
chk_sts,pid1,オルド性格,4
chk_sts_then
    goto,*yokujo
chk_sts_else
chk_sts,pid1,オルド性格,5
chk_sts_then
    goto,*kyokutan
chk_sts_else
    goto,*fail

*kimagure
    // 気まぐれ型は50%成功
    rnd,2
    case0
        goto,*success
    case1
        goto,*fail

*chuseido
    // 忠誠度型は功績が大きい相手なら66%成功
    rnd,3
    case0
    case1
        chk_mval,功績:pid2>功績:pid1,,,,
            chk_mval_then
                goto,*success
            chk_mval_else
    case2
        goto,*fail

*keiken
    // 経験依存型は交渉61以上の相手なら75%成功
    rnd,4
    case0
    case1
    case2
        chk_mval,交渉:pid2>60,,,,
            chk_mval_then
                goto,*success
            chk_mval_else
    case3
        goto,*fail

*sasenai
    // 絶対させない型は25%成功
    rnd,4
    case0
        goto,*success
    case1
    case2
    case3
        goto,*fail

*yokujo
    // 欲情型は100%成功
    goto,*success

*kyokutan
    // 極端忠誠型は功績が1000以上大きい相手なら75%成功
    rnd,4
    case0
    case1
    case2
        plus,280,功績:pid2,1000
        chk_mval,eveflg280>=功績:pid1,,,,
            chk_mval_then
                goto,*success
            chk_mval_else
    case3
        goto,*fail

*success
    // 子作りに成功したら

    set_non_virgin,pid1
    set_ninsin,pid1,pid2
    txtload,u_npc_marry/marry

*fail
    // 子作りに失敗したら
    end
